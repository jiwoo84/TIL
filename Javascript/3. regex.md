# regex

정규식은 문자열 메서드와 조합하여 사용됨

## 생성

- 긴 문법
    
    `new RegExp("pattern", "flags")`
    
    중간에 표현식 사용 가능 ⇒ 동적인 문자열에 적용하기 유용
    
    ```jsx
    let tag = prompt("어떤 태그를 찾고 싶나요?");
    
    let regexp = new RegExp(`<${tag}>`); // 위에서 "h2" 로 대답하면 /<h2>/와 동일한 역할
    ```
    
- 짧은 문법
    
    `/pattern/`  (플래그 없음)
    
    `/pattern/flags` (플래그 있음)
    
    빗금 안에는 표현식 사용 불가 ⇒ 패턴을 알고 있는 문자열에 주로 사용
    

### 플래그

- `i` : 대소문자 구분 없이 검색
- `g` : 패턴과 일치하는 것 모두 반환 (없으면 첫번째 결과만 반환)
- `m` : 다중 행 모드(multiline mode)를 활성화
- `s` : `.`이 줄 바꿈 문자 `\n`도 포함하도록 ‘dotall’ 모드를 활성화
- `u` : 유니코드 전체를 지원 → 서로게이트 쌍을 올바르게 처리 가능
- `y` : 문자 내 특정 위치에서 검색을 진행하는 stiky모드 활성화

## 검색

1. `**string.match(regexp)**`
    
    문자열에서 정규식과 일치하는 부분을 요소로 하는 배열 반환
    
    - 플래그 `g` O → 모든 일치값 배열 반환
    - 플래그 `g`  X → 첫번째 일치값만 담은 배열 반환
    - 일치값 없으면 → `null` 반환
        
        (`string.match(regexp) || []` 와 같이 무조건 배열 반환하게 설정하여 오류 방지할 수 있음)
        

1. `**regexp.test(str)**`
    
    일치값 존재 유무 boolean 반환
    

## 치환

`str.replace(regexp, "replacement")`

문자열 중 일치하는 부분을 replacement로 교체

- 플래그 `g` O → 모든 일치값 교체
- 플래그 `g`  X → 첫번째 일치값만 교체

```jsx
// 플래그 g 없음
alert( "We will, we will".replace(/we/i, "I") ); // I will, we will

// 플래그 g 있음
alert( "We will, we will".replace(/we/ig, "I") ); // I will, I will
```

- `“replacement”` 에 사용 가능한 특수문자
    - $& : 일치하는 문자열 삽입
    - [더보기](https://ko.javascript.info/regexp-introduction)
    

### 문자 클래스

- 일반 문자와 문자 클래스 같이 사용 가능
- 공백 있는지 잘 보기!

1. `**\d**` : (digit 숫자) 0~9 사이의 **숫자**

1. `**\s**` : (space 공백) **공백** 기호
    - 스페이스, 탭(`\t`), 줄 바꿈(`\n`), `\v`
    , `\f`, `\r`을 포함
    - 그냥 공백을 넣어도 됨
        
        `alert( "1 - 5".match(/\d - \d/) );`
        
        = `alert( "1 - 5".match(/\d\s-\s\d/) );`
        
    
2. `**\w**` : (word 단어) **글자**
    - 문자, 숫자를 포함한 문자
        
        ex ) `a, b, 가, 나, 다, 1, 2`
        
    - 특수문자 미포함 /  `_` & 라틴문자 포함
    

```jsx
let str = "Is there CSS4?";

alert( str.match(/CSS\d) ); // 'CSS4'
alert( str.math(/\s\w\w\w\d/); // ' CSS4'
```

1. `**.**` : (점) 모든 문자와 일치하는 특별 문자 클래스 
    - 줄 바꿈 문자 `\n`만 미포함
        
        → 플래그 `s`를 붙이면 포함시킴
        
    - 대체하는 클래스 (`.`과 동시 사용 가능)
        - `[\s\S]` = 공백 문자 or 공백 문자가 아닌문자 ⇒ 모든 문자
            
            (`[\d\D]` 같은 반대되는 클래스 패턴 다 가능)
            
        - `[^]` = 아무 문자도 없는 경우를 제외
    
    ```jsx
    alert( "CSS4".match(/CS.4/) ); // CSS4
    alert( "CS-4".match(/CS.4/) ); // CS-4
    alert( "CS 4".match(/CS.4/) ); // CS 4 (공백도 문자)
    alert( "CS4".match(/CS.4/) ); // null (문자의 부재는 안됨)
    
    // 줄바꿈 포함 & 미포함
    alert( "CS\n4".match(/CS.4/) ); // null
    alert( "CS\n4".match(/CS.4/s) ); // CS\n4
    ```
    

### 반대 클래스

해당 문자를 제외한 모든 문자에 일치

- `**\D**` : 숫자가 아닌 문자
- `**\S**` : 공백이 아닌 문자
- `**\W**` : `\w`와 일치하지 않는 모든 문자
    
    (공백이나 비 라틴문자 등)
    

```jsx
let str = "+7(903)-123-45-67";

alert( str.match(/\d/g).join('') ); // 79031234567
alert( str.replace(/\D/g, "") ); // 79031234567
```

- `+` : 하나 혹은 그 이상 연결된 문자를 의미
- `*` : 0개 이상
- `?` : 있거나 없거나
- `[AB]` : A or B
- `{n}` : n(숫자)번 반복한다
    
    ex) `\d{2}` ⇒ 숫자가 연속 두 번 나온다
    
    - `{n, m}` : n번부터 m번까지 반복
- `[abc]` : a, b, c 문자를 찾아서 선택
- `[a-z]` : a부터 z까지 소문자 알파벳 모두 선택

### 자연수 찾기

`[1-9]\d*`

1. 첫자리 1~9
2. 그 다음 자리는 0~9
- 처음에 1~9중 하나의 숫자가 나온 다음그 뒤에는 숫자가 0개 이상 나오면 ⇒ 자연수
- `*` : 0개 이상 →  `\d*` = 숫자가 0개 이상이다 → 자연수 = `[1-9]\d*`
    
    (`[1-9]\d+`로 하면 02 같이 앞이 0인 숫자는 인식 못함)
    

### 전화번호 찾기

1. `029697496` or `02-969-7496` 형태
    
    ⇒ `\d+-?\d+-?\d+` (`-?` : -가 있거나없거나)
    
2. `02 969 7496` 같이 공백 포함도 찾으려면
    
    ⇒ `\d+[- ]?\d+[- ]?\d+` (`[- ]?` : - 또는 공백이 있거나없음)
    

1. `022255555-77774555` 같은 숫자 제외하려면
    
    ⇒ `\d{2,3}[- ]?\d{3,4}[- ]?\d{4}`
    
    `02-123-4567` `070-9999-9999` `010 2454 3457` 형태의 전화번호 추출 가능
    

### 문자

(단어는 끝에 `+` 붙여주기)

- 영어 소문자 `[a-z]`
- 한글 `[가-힣]`  (ㄱ,ㄴ,ㅗ 같은 낱글자는 불가)
- 이외
    - `\s` 공백 문자
    - `\S` 공백을 제외한 문자
    - `\D` 숫자를 제외한 문자
    - `\W` 글자 대표 문자를 제외한 글자들 (특수문자, 공백 등)